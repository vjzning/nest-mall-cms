---
import { actions } from 'astro:actions';

interface Props {
    user: any;
    activeTab: 'profile' | 'orders' | 'favorites' | 'addresses' | 'after-sale';
}

const { user, activeTab } = Astro.props;
---

<div class='p-6 bg-white rounded-lg shadow-lg'>
    <div class='mb-6 text-center'>
        <div
            class='flex overflow-hidden justify-center items-center mx-auto mb-4 w-24 h-24 rounded-full bg-nike-grey'
        >
            {
                user.avatar ? (
                    <img
                        src={user.avatar}
                        alt={user.nickname}
                        class='object-cover w-full h-full'
                    />
                ) : (
                    <span class='text-3xl font-bold uppercase'>
                        {user.nickname?.charAt(0) || 'U'}
                    </span>
                )
            }
        </div>
        <h2 class='text-xl font-bold'>{user.nickname}</h2>
        <p class='text-sm text-nike-dark-grey'>@{user.username}</p>
    </div>

    <nav class='space-y-2'>
        <a
            href='/member/profile'
            class={`block px-4 py-2 rounded transition-colors ${activeTab === 'profile' ? 'bg-nike-black text-white' : 'text-nike-black hover:bg-nike-grey'}`}
        >
            个人信息
        </a>
        <a
            href='/member/orders'
            class={`block px-4 py-2 rounded transition-colors ${activeTab === 'orders' ? 'bg-nike-black text-white' : 'text-nike-black hover:bg-nike-grey'}`}
        >
            我的订单
        </a>
        <a
            href='/member/after-sale'
            class={`block px-4 py-2 rounded transition-colors ${activeTab === 'after-sale' ? 'bg-nike-black text-white' : 'text-nike-black hover:bg-nike-grey'}`}
        >
            退换/售后
        </a>
        <a
            href='/member/favorites'
            class={`block px-4 py-2 rounded transition-colors ${activeTab === 'favorites' ? 'bg-nike-black text-white' : 'text-nike-black hover:bg-nike-grey'}`}
        >
            我的收藏
        </a>
        <a
            href='/member/address'
            class={`block px-4 py-2 rounded transition-colors ${activeTab === 'addresses' ? 'bg-nike-black text-white' : 'text-nike-black hover:bg-nike-grey'}`}
        >
            收货地址
        </a>
        <form method='POST' action={actions.auth.logout}>
            <button
                type='submit'
                class='px-4 py-2 w-full font-medium text-left text-red-600 rounded transition-colors hover:bg-nike-grey'
            >
                退出登录
            </button>
        </form>
    </nav>
</div>
