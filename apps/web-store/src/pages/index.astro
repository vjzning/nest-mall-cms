---
import Layout from "../layouts/Layout.astro";
import { CollectionType, CollectionLayout, type CollectionInfo } from "@app/shared";
import CollectionSection from "../components/nike/CollectionSection.astro";
import { API_ENDPOINTS, request } from "../lib/api";

// Fetch collections from the store API
const activeCollections = await request<CollectionInfo[]>(API_ENDPOINTS.COLLECTIONS_ACTIVE).catch((e) => {
  console.error("Failed to fetch collections:", e);
  return [];
});
---

<Layout title="首页">
  {
    activeCollections.map((collection) => (
      <CollectionSection collection={collection} />
    ))
  }
</Layout>
